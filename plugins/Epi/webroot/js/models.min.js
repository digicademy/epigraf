(()=>{"use strict";var t,e,i,n,s={584:(t,e,i)=>{i.d(e,{I:()=>o});var n=i(182);class s{constructor(t){this.modelParent=t,this.modelChildren=[],t&&t.modelChildren.push(this),this.eventListeners=[],this.resizeListeners=[],this.hasFocus=!1}listenEvent(t,e,i,s){if(t)if(t instanceof NodeList)t.forEach((t=>this.listenEvent(t,e,i,s)));else{n.Z.listenEvent(t,e,i,s);const r={element:t,event:e,handler:i,selector:s};this.eventListeners.push(r),"submit"===e&&this.listenEvent(t,"epi:submit:form",i)}}unlistenEvent(t,e,i,s){let r=this.eventListeners.length;for(;r--;){const o=this.eventListeners[r];o.element!==t||o.event!==e||o.handler!==i&&i||o.selector!==s&&s||(n.Z.unlistenEvent(t,o.event,o.handler,o.selector),this.eventListeners.splice(r,1))}"submit"===e&&this.unlistenEvent(t,"epi:submit:form",i)}emitEvent(t,e,i,s=!1){return n.Z.emitEvent(t,e,i,this,s)}getWidget(t,e,i=!0){if(t)return i&&(t=t.closest(".widget-"+e)),t&&t.widgets?t.widgets[e]:void 0}clearWidget(){this.eventListeners.forEach((t=>n.Z.unlistenEvent(t.element,t.event,t.handler,t.selector))),this.eventListeners=[],this.resizeListeners.forEach((t=>t.observer.unobserve(t.element))),this.resizeListeners=[],this.modelChildren.forEach((t=>t.clearWidget())),this.modelChildren=[]}}class r extends s{widgetElement=void 0;widgetName=void 0;widgetInitialized=!1;hasFocus=!1;constructor(t,e,i){super(i),this.widgetInitialized=!1,this.attachElement(t,e),this.listenEvent(document,"epi:clear:widgets",(t=>this.onClearWidgets(t.target))),this.listenEvent(document,"epi:init:widgets",(t=>this.onInitWidgets(t))),this.listenEvent(document,"focusout",(t=>this.onFocusChanged(t))),this.listenEvent(document,"focusin",(t=>this.onFocusChanged(t))),this.listenEvent(document,"click",(t=>this.onFocusChanged(t)))}clearWidget(){super.clearWidget(),this.detachElement(this.widgetElement,this.widgetName)}initWidget(){}updateWidget(){}onClearWidgets(t){t&&this.widgetElement&&t!==this.widgetElement&&t.contains(this.widgetElement)&&this.clearWidget()}attachElement(t,e,i=!0){i&&(this.widgetElement=t,this.widgetName=e),t&&e&&(t.widgets=t.widgets||{},t.widgets[e]=this)}detachElement(t,e){t&&e&&(t.widgets=t.widgets||{},delete t.widgets[e])}emitEvent(t,e,i){return super.emitEvent(this.widgetElement,t,e,i)}listenResize(t,e){if(t){const i=new ResizeObserver((t=>e(t)));i.observe(t);const n={element:t,observer:i,handler:e};this.resizeListeners.push(n)}}unlistenResize(t,e){e.unobserve(t)}spawnFromTemplate(t,e){const i=this.widgetElement.querySelector(".template."+t);return n.Z.spawnFromTemplate(i,e)}onInitWidgets(t){this.widgetInitialized||(this.widgetInitialized=!0,this.initWidget())}onFocusChanged(t){if(this.widgetElement&&this.widgetElement instanceof Element)if(void 0===t)this.setFocus(!0);else{const e=this.widgetElement.contains(t.target)&&"focusout"!==t.type;this.setFocus(e)}}setFocus(t=!0){if(this.widgetElement&&this.widgetElement instanceof Element){if(this.hasFocus===t)return;this.hasFocus=t,this.widgetElement.classList.toggle("widget-focused",this.hasFocus),this.emitEvent("epi:focus:widgets",{focus:this.hasFocus})}}doFocus(){this.widgetElement&&this.widgetElement instanceof Element&&(this.setFocus(!0),this.widgetElement.focus())}getSetting(t,e){if(this.widgetElement&&this.widgetElement.dataset.uiKey){const e=App.user.session.get("ui",this.widgetElement.dataset.uiKey);if(void 0!==e&&t in e)return e[t]}return e}setSetting(t,e){if(this.widgetElement&&this.widgetElement.dataset&&this.widgetElement.dataset.uiKey){let i={};i[t]=e,App.user.session.save("ui",this.widgetElement.dataset.uiKey,i)}}getController(){return n.Z.getClassValue(document.querySelector("body"),"controller_")}getAction(){return n.Z.getClassValue(document.querySelector("body"),"action_")}getFrame(t=!0,e=!1){if(!this.widgetElement||this.widgetElement===document)return t?void 0:document;let i;return e&&this.widgetElement.classList.contains("widget-content-pane")&&(i=this.widgetElement),i||(i=this.widgetElement.closest(".widget-content-pane")),t?i?i.widgets["content-pane"]:void 0:i&&!i.classList.contains("widget-content-pane-main")?i:document}isInFrame(){return this.widgetElement&&null!==this.widgetElement.closest(".widget-content-pane")&&!this.widgetElement.closest(".widget-content-pane-main")}}class o extends r{constructor(t,e,i){super(t,e,i),this.formElement=void 0,this.cancelButton=void 0,this.deleteButton=void 0,this.lockTimeout=void 0,this.isSaving=!1}attachForm(t,e=!0){this.detachForm(),!e&&this.getWidget(t,"baseform",!1)||(this.formElement=t,this.formElement&&(this.attachElement(t,"baseform",!1),this.listenButtons(),this.listenEvent(document,"epi:open:tab",(t=>this.onExternalClick(t))),this.listenEvent(this.formElement,"submit",(t=>this.submitForm(t))),this.listenEvent(this.formElement,"keydown",(t=>this.onKeyDown(t))),this.listenEvent(window,"beforeunload",(t=>this.onExit(t)))))}detachForm(){this.unlistenButtons(),this.formElement&&(this.unlistenEvent(document,"epi:open:tab"),this.unlistenEvent(this.formElement,"submit"),this.unlistenEvent(window,"beforeunload"),this.formElement=void 0)}listenButtons(){this.formElement&&(this.cancelButton||(this.cancelButton=document.querySelector('button[data-role="cancel"][form="'+this.formElement.getAttribute("id")+'"]'),this.cancelButton&&this.listenEvent(this.cancelButton,"click",(t=>this.onCancelClick(t)))),this.deleteButton||(this.deleteButton=document.querySelector('button[data-role="delete"][form="'+this.formElement.getAttribute("id")+'"]'),this.deleteButton&&this.listenEvent(this.deleteButton,"click",(t=>this.onDeleteClick(t)))),this.lockTimeout||this.setLockTimeout((()=>this.lock(!0)),15e3))}unlistenButtons(){this.formElement&&this.clearLockTimeout(),this.deleteButton&&this.unlistenEvent(this.deleteButton,"click"),this.cancelButton&&this.unlistenEvent(this.cancelButton,"click")}onExit(t){if(!this.isSaving&&this.hasLock()){const e="You have opened a dataset. The dataset may stay locked if you don't close it. Do you want to leave the page anyways?";return t.preventDefault(),t.returnValue=e,e}}setLockTimeout(t,e){this.lockTimeout=setTimeout((()=>t()),e)}clearLockTimeout(){this.lockTimeout&&(clearTimeout(this.lockTimeout),this.lockTimeout=void 0)}hasLock(){if(!this.formElement)return!1;return null!==this.formElement.querySelector('input[name="lock"][data-lock-url]')}async lock(t=!0){if(this.lockTimeout=void 0,!this.formElement)return;if(this.isSaving)return;const e=this.formElement.querySelector('input[name="lock"][data-lock-url]'),i=e?e.dataset.lockUrl:null,n=e?e.value:null;i&&n&&(await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lock:n})}),t&&this.setLockTimeout((()=>this.lock(!0)),15e3))}async unlock(){if(this.clearLockTimeout(),!this.formElement)return;if(this.isSaving)return;const t=this.formElement.querySelector('input[name="lock"][data-lock-url]'),e=t?t.dataset.unlockUrl:null,i=t?t.value:null;e&&i&&await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lock:i})})}clearWidget(){super.clearWidget()}unlockForm(t,e=!1){if(!t)return void this.closeWindow(!0);let i;if(this.formElement){const t=this.formElement.querySelector('input[name="lock"][data-lock-url]');i=t?t.value:null}if(i)if(this.isSaving=!0,this.clearLockTimeout(),e&&this.loadUrl)this.loadUrl(t,{lock:i});else{const e=n.Z.spawnFromString('<input type="hidden" name="lock" value="'+i+'">'),s=document.createElement("form");s.action=t,s.method="POST",s.appendChild(e),document.body.appendChild(s),s.submit()}else this.loadUrl&&this.loadUrl(t)}onCancelClick(t){if(this.formElement){const t=n.Z.decodeHtmlAttribute(this.formElement.dataset.cancelUrl);this.unlockForm(t)}}onExternalClick(t){if(this.formElement&&t.target.contains(this.formElement)){const t=n.Z.decodeHtmlAttribute(this.formElement.dataset.cancelUrl);this.unlockForm(t,!0)}}onDeleteClick(t){if(this.formElement){const t=n.Z.decodeHtmlAttribute(this.formElement.dataset.deleteUrl);this.unlockForm(t)}}onKeyDown(t){13===t.keyCode&&"INPUT"===t.target.tagName&&t.preventDefault()}submitForm(t){if(!this.formElement)return!1;let e=[];this.footerPane&&(e=Array.from(this.footerPane.querySelectorAll("[data-position=fixed]")),e.forEach(((t,e)=>{this.formElement.appendChild(t)})));try{if(!this.validateForm())return;if(t.submitter&&"submit"===t.submitter.dataset.role)return this.isSaving=!0,!1;t.preventDefault(),t.stopPropagation(),this.saveForm()}finally{e.forEach(((t,e)=>{this.footerPane.appendChild(t)}))}return!1}validateForm(){return!(!this.formElement||!this.formElement.reportValidity())&&!!this.emitEvent("epi:save:form",{},!0)}saveForm(){return!!this.formElement&&(!this.isSaving&&(!!this.onSaveStart()&&this.onSavePost()))}onSaveStart(){this.emitEvent("app:show:loader");const t=this.formElement&&"message"in this.formElement.dataset?this.formElement.dataset.message:"Saving document";return t&&this.emitEvent("app:open:dialog",{message:t,loader:!0,id:"save-dialog",delay:150}),this.clearLockTimeout(),this.isSaving=!0,!0}onSavePost(){let t,e,i=this.formElement.querySelector("[data-root-table][data-root-id]");i=i||this.formElement.closest("[data-root-table][data-root-id]"),i&&i.dataset.rootTable&&i.dataset.rootId&&(t=i.dataset.rootTable+"-"+i.dataset.rootId);let s=null,r=!1;const o=this.formElement.method||"POST";"GET"===o.toUpperCase()?e=n.Z.formToUrl(this.formElement,App.baseUrl):(e=this.formElement.getAttribute("action"),this.formElement.action="",s=new FormData(this.formElement),"json"===this.formElement.dataset.format&&(s=JSON.stringify(n.Z.parseFormData(s)),r="application/json"),this.formElement.action=e);const a=this,l=new XMLHttpRequest;return l.method=o.toUpperCase(),$.ajax({type:o,url:e,data:s,xhr:()=>l,async:!0,contentType:r,processData:!1,success:(e,i,n)=>a.onSaveSuccess(t,e,i,l),error:t=>a.onSaveFailed(l),complete:t=>a.onSaveEnd(l)}),!0}onSaveSuccess(t,e,i,n){this.hideLoader();const s=t?t.split("-"):[];if(s.length>1&&"new"===s[1]&&(t=void 0),this.formOptions&&this.formOptions.onSubmitted)return this.formOptions.onSubmitted(this,e,i,n),!1;const r=n.getResponseHeader("content-type");let o="update",a=[];if("GET"===n.method)o="unchanged";else if(t){const i=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-root-table][data-root-id]");if(i&&"1"===i.dataset.deleted&&a.push(t),i&&i.dataset.mergedIds){let t=i.dataset.mergedIds.split(",").map((t=>i.dataset.rootTable+"-"+t));a=a.concat(t)}i&&"1"===i.dataset.moved&&(o="moved")}else if(o="create","application/json"===r){const i=e[Object.keys(e)[0]];i&&(t=i.id)}else{const i=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-root-table][data-root-id]");i&&(t=i.dataset.rootTable+"-"+i.dataset.rootId)}return"update"===o&&t&&!a.includes(t)?this.emitEvent("epi:update:row",{row:t,sender:this}):"moved"===o&&t?this.emitEvent("epi:move:row",{row:t,sender:this}):"create"===o&&t&&this.emitEvent("epi:create:row",{row:t,sender:this}),a.forEach((t=>this.emitEvent("epi:delete:row",{row:t,sender:this}))),this.onSaveProceed(e,n)}onSaveProceed(t,e){let i,s,r;return"application/json"===e.getResponseHeader("content-type")?(i=n.Z.getValue(t,"status.message"),s=n.Z.getValue(t,"status.success",!1)?"success":"error",r=n.Z.getValue(t,"status.errors")):(i=(new DOMParser).parseFromString(t,"text/html").querySelector("[data-snippet=message]"),s=i&&i.classList.contains("error")?"error":"success",i=i?i.textContent:void 0),i&&this.emitEvent("app:show:message",{msg:i,status:s,errors:r}),"success"===s}onSaveFailed(t){this.emitEvent("app:show:message",{msg:"Saving failed: "+t.responseText,status:"error"})}onSaveEnd(t){return n.Z.emitEvent(document,"app:close:dialog",{id:"save-dialog"}),n.Z.emitEvent(document,"app:hide:loader"),this.isSaving=!1,!0}}},649:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{a:()=>m});var s,r,o,a,l,c,u={498:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.errorMessages=e.ErrorType=void 0,function(t){t.MalformedUnicode="MALFORMED_UNICODE",t.MalformedHexadecimal="MALFORMED_HEXADECIMAL",t.CodePointLimit="CODE_POINT_LIMIT",t.OctalDeprecation="OCTAL_DEPRECATION",t.EndOfString="END_OF_STRING"}(i=e.ErrorType||(e.ErrorType={})),e.errorMessages=new Map([[i.MalformedUnicode,"malformed Unicode character escape sequence"],[i.MalformedHexadecimal,"malformed hexadecimal character escape sequence"],[i.CodePointLimit,"Unicode codepoint must not be greater than 0x10FFFF in escape sequence"],[i.OctalDeprecation,'"0"-prefixed octal literals and octal escape sequences are deprecated; for octal literals use the "0o" prefix instead'],[i.EndOfString,"malformed escape sequence at end of string"]])},12:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unraw=e.errorMessages=e.ErrorType=void 0;const n=i(498);function s(t,e,i){const s=function(t){return t.match(/[^a-f0-9]/i)?NaN:parseInt(t,16)}(t);if(Number.isNaN(s)||void 0!==i&&i!==t.length)throw new SyntaxError(n.errorMessages.get(e));return s}function r(t,e){const i=s(t,n.ErrorType.MalformedUnicode,4);if(void 0!==e){const t=s(e,n.ErrorType.MalformedUnicode,4);return String.fromCharCode(i,t)}return String.fromCharCode(i)}Object.defineProperty(e,"ErrorType",{enumerable:!0,get:function(){return n.ErrorType}}),Object.defineProperty(e,"errorMessages",{enumerable:!0,get:function(){return n.errorMessages}});const o=new Map([["b","\b"],["f","\f"],["n","\n"],["r","\r"],["t","\t"],["v","\v"],["0","\0"]]),a=/\\(?:(\\)|x([\s\S]{0,2})|u(\{[^}]*\}?)|u([\s\S]{4})\\u([^{][\s\S]{0,3})|u([\s\S]{0,4})|([0-3]?[0-7]{1,2})|([\s\S])|$)/g;function l(t,e=!1){return t.replace(a,(function(t,i,a,l,c,u,d,h,m){if(void 0!==i)return"\\";if(void 0!==a)return function(t){const e=s(t,n.ErrorType.MalformedHexadecimal,2);return String.fromCharCode(e)}(a);if(void 0!==l)return function(t){if("{"!==(e=t).charAt(0)||"}"!==e.charAt(e.length-1))throw new SyntaxError(n.errorMessages.get(n.ErrorType.MalformedUnicode));var e;const i=s(t.slice(1,-1),n.ErrorType.MalformedUnicode);try{return String.fromCodePoint(i)}catch(t){throw t instanceof RangeError?new SyntaxError(n.errorMessages.get(n.ErrorType.CodePointLimit)):t}}(l);if(void 0!==c)return r(c,u);if(void 0!==d)return r(d);if("0"===h)return"\0";if(void 0!==h)return function(t,e=!1){if(e)throw new SyntaxError(n.errorMessages.get(n.ErrorType.OctalDeprecation));const i=parseInt(t,8);return String.fromCharCode(i)}(h,!e);if(void 0!==m)return p=m,o.get(p)||p;var p;throw new SyntaxError(n.errorMessages.get(n.ErrorType.EndOfString))}))}e.unraw=l,e.default=l},494:(t,e,i)=>{i.a(t,(async(t,n)=>{try{i.d(e,{a:()=>s.ag});var s=i(555);const{messages:t}=await i.e(190).then(i.bind(i,455));s.ag.load("de_DE",t),s.ag.activate("de_DE"),n()}catch(t){n(t)}}),1)},555:(t,e,i)=>{i.d(e,{ag:()=>b});var n=i(12);const s=t=>"string"==typeof t,r=new Map;function o(t){return[...Array.isArray(t)?t:[t],"en"]}function a(t,e,i){const n=o(t);return u((()=>d("date",n,i)),(()=>new Intl.DateTimeFormat(n,i))).format(s(e)?new Date(e):e)}function l(t,e,i){const n=o(t);return u((()=>d("number",n,i)),(()=>new Intl.NumberFormat(n,i))).format(e)}function c(t,e,i,{offset:n=0,...s}){const r=o(t),a=e?u((()=>d("plural-ordinal",r)),(()=>new Intl.PluralRules(r,{type:"ordinal"}))):u((()=>d("plural-cardinal",r)),(()=>new Intl.PluralRules(r,{type:"cardinal"})));return s[i]??s[a.select(i-n)]??s.other}function u(t,e){const i=t();let n=r.get(i);return n||(n=e(),r.set(i,n)),n}function d(t,e,i){return`${t}-${e.join("-")}-${JSON.stringify(i)}`}const h=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/g;function m(t,e,i){return(r,o={})=>{const u=((t,e,i={})=>{e=e||t;const n=t=>s(t)?i[t]||{style:t}:t,r=(t,s)=>{const r=Object.keys(i).length?n("number"):{},o=l(e,t,r);return s.replace("#",o)};return{plural:(t,i)=>{const{offset:n=0}=i,s=c(e,!1,t,i);return r(t-n,s)},selectordinal:(t,i)=>{const{offset:n=0}=i,s=c(e,!0,t,i);return r(t-n,s)},select:(t,e)=>e[t]??e.other,number:(t,i)=>l(e,t,n(i)),date:(t,i)=>a(e,t,n(i)),undefined:t=>t}})(e,i,o),d=t=>Array.isArray(t)?t.reduce(((t,e)=>{if(s(e))return t+e;const[i,n,o]=e;let a={};null==o||s(o)?a=o:Object.keys(o).forEach((t=>{a[t]=d(o[t])}));const l=u[n](r[i],a);return null==l?t:t+l}),""):t,m=d(t);return s(m)&&h.test(m)?n(m.trim()):s(m)?m.trim():m}}var p=Object.defineProperty;class f{constructor(){((t,e,i)=>{((t,e,i)=>{e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!=typeof e?e+"":e,i)})(this,"_events",{})}on(t,e){return this._hasEvent(t)||(this._events[t]=[]),this._events[t].push(e),()=>this.removeListener(t,e)}removeListener(t,e){if(!this._hasEvent(t))return;const i=this._events[t].indexOf(e);~i&&this._events[t].splice(i,1)}emit(t,...e){this._hasEvent(t)&&this._events[t].map((t=>t.apply(this,e)))}_hasEvent(t){return Array.isArray(this._events[t])}}var g=Object.defineProperty,v=(t,e,i)=>(((t,e,i)=>{e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!=typeof e?e+"":e,i),i);class E extends f{constructor(t){super(),v(this,"_locale"),v(this,"_locales"),v(this,"_localeData"),v(this,"_messages"),v(this,"_missing"),v(this,"t",this._.bind(this)),this._messages={},this._localeData={},null!=t.missing&&(this._missing=t.missing),null!=t.messages&&this.load(t.messages),null!=t.localeData&&this.loadLocaleData(t.localeData),null==t.locale&&null==t.locales||this.activate(t.locale,t.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(t,e){null==this._localeData[t]?this._localeData[t]=e:Object.assign(this._localeData[t],e)}loadLocaleData(t,e){null!=e?this._loadLocaleData(t,e):Object.keys(t).forEach((e=>this._loadLocaleData(e,t[e]))),this.emit("change")}_load(t,e){null==this._messages[t]?this._messages[t]=e:Object.assign(this._messages[t],e)}load(t,e){null!=e?this._load(t,e):Object.keys(t).forEach((e=>this._load(e,t[e]))),this.emit("change")}loadAndActivate({locale:t,locales:e,messages:i}){this._locale=t,this._locales=e||void 0,this._messages[this._locale]=i,this.emit("change")}activate(t,e){this._locale=t,this._locales=e,this.emit("change")}_(t,e={},{message:i,formats:n}={}){s(t)||(e=t.values||e,i=t.message,t=t.id);const r=!this.messages[t],o=this._missing;if(o&&r)return"function"==typeof o?o(this._locale,t):o;r&&this.emit("missing",{id:t,locale:this._locale});let a=this.messages[t]||i||t;return s(a)&&h.test(a)?JSON.parse(`"${a}"`):s(a)?a:m(a,this._locale,this._locales)(e,n)}date(t,e){return a(this._locales||this._locale,t,e)}number(t,e){return l(this._locales||this._locale,t,e)}}const b=function(t={}){return new E(t)}()}},d={};function p(t){var e=d[t];if(void 0!==e)return e.exports;var i=d[t]={exports:{}};return u[t](i,i.exports,p),i.exports}p.m=u,s="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},p.a=(t,e,i)=>{var n;i&&((n=[]).d=-1);var l,c,u,d=new Set,h=t.exports,m=new Promise(((t,e)=>{u=e,c=t}));m[r]=h,m[s]=t=>(n&&t(n),d.forEach(t),m.catch((t=>{}))),t.exports=m,e((t=>{var e;l=(t=>t.map((t=>{if(null!==t&&"object"==typeof t){if(t[s])return t;if(t.then){var e=[];e.d=0,t.then((t=>{i[r]=t,a(e)}),(t=>{i[o]=t,a(e)}));var i={};return i[s]=t=>t(e),i}}var n={};return n[s]=t=>{},n[r]=t,n})))(t);var i=()=>l.map((t=>{if(t[o])throw t[o];return t[r]})),c=new Promise((t=>{(e=()=>t(i)).r=0;var r=t=>t!==n&&!d.has(t)&&(d.add(t),t&&!t.d&&(e.r++,t.push(e)));l.map((t=>t[s](r)))}));return e.r?c:i()}),(t=>(t?u(m[o]=t):c(h),a(n)))),n&&n.d<0&&(n.d=0)},p.d=(t,e)=>{for(var i in e)p.o(e,i)&&!p.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},p.f={},p.e=t=>Promise.all(Object.keys(p.f).reduce(((e,i)=>(p.f[i](t,e),e)),[])),p.u=t=>"../msg/de_DE.js",p.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),l={},c="Epigraf Widgets:",p.l=(t,e,i,n)=>{if(l[t])l[t].push(e);else{var s,r;if(void 0!==i)for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){var u=o[a];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==c+i){s=u;break}}s||(r=!0,(s=document.createElement("script")).type="module",s.charset="utf-8",s.timeout=120,p.nc&&s.setAttribute("nonce",p.nc),s.setAttribute("data-webpack",c+i),s.src=t),l[t]=[e];var d=(e,i)=>{s.onerror=s.onload=null,clearTimeout(h);var n=l[t];if(delete l[t],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((t=>t(i))),e)return e(i)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),r&&document.head.appendChild(s)}},p.p="/",(()=>{var t={434:0};p.f.j=(e,i)=>{var n=p.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise(((i,s)=>n=t[e]=[i,s]));i.push(n[2]=s);var r=p.p+p.u(e),o=new Error;p.l(r,(i=>{if(p.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,n[1](o)}}),"chunk-"+e,e)}};var e=(e,i)=>{var n,s,[r,o,a]=i,l=0;if(r.some((e=>0!==t[e]))){for(n in o)p.o(o,n)&&(p.m[n]=o[n]);a&&a(p)}for(e&&e(i);l<r.length;l++)s=r[l],p.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkEpigraf_Widgets=self.webpackChunkEpigraf_Widgets||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var h=p(494),m=(h=await h).a;n()}catch(s){n(s)}}),1)},182:(t,e,i)=>{i.d(e,{Z:()=>s});class n{static hide(t){t&&(t.originalDisplay=window.getComputedStyle(t).getPropertyValue("display"),t.style.display="none")}static show(t,e){t&&("none"===t.style.display&&(t.style.display=t.originalDisplay||"block"),"none"===t.style.display&&(t.style.display="block"),void 0!==e&&(t.textContent=e))}static toggle(t,e=!0){e?this.show(t):this.hide(t)}static scrollToTop(t,e){t&&t.scrollIntoView(!0)}static getTotalOffset(t,e){let i=0,n=0,s=t;for(;s&&s!==e.offsetParent;)i+=s.offsetTop,n+=s.offsetLeft,s=s.offsetParent;return{top:i,left:n}}static getStickyElementHeight(t,e){const i=t.querySelector(e);if(i&&t!==i){if("sticky"===window.getComputedStyle(i).position)return i.offsetHeight}return 0}static scrollIntoViewIfNeeded(t,e,i=!0,s=!0){const r="y"===i||!0===i,o="x"===i||!0===i,a="y"===s||!0===s,l="x"===s||!0===s;if(!t||!n.isElementVisible(t))return;e=e||t.parentNode;const c=t.getBoundingClientRect();let u=e.getBoundingClientRect();const d=e.offsetHeight-e.clientHeight,h=n.getStickyElementHeight(e,"thead, li");u=new DOMRect(u.x,u.y+h,u.width,u.height-d-h);const m=c.top<u.top,p=c.bottom>u.bottom;if(a){let i;if(m&&!p?i=c.top-u.top:p&&!m&&(i=c.bottom-u.bottom),void 0!==i){if(r){let n=e.offsetHeight/2-t.offsetHeight/2;n=m?-n:+n,i+=n}e.scrollTop=e.scrollTop+i}}const f=c.left<u.left,g=c.right>u.right;if(l){let i;if(f&&!g?i=c.left-u.left:g&&!f&&(i=c.right-u.right),void 0!==i){if(o){let n=e.offsetWidth/2-t.offsetWidth/2;n=f?-n:+n,i+=n}e.scrollLeft=e.scrollLeft+i}}}static getParameterByName(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}static getValue(t,e,i=undefined){if(e&&Array.isArray(e)){for(let i of e){const e=this.getValue(t,i);if(void 0!==e)return e}return i}try{const n=e.split(".").reduce(((t,e)=>null==t||""===e?t:t.constructor===Array?t[parseInt(e)]:t[e]),t);return void 0===n?i:n}catch{return i}}static setValue(t,e,i,s=!1){return"string"==typeof e&&(e=e.replace(/\]/g,"").split(/[\[\.]/)),e.length>1?(t.hasOwnProperty(e[0])?"object"!=typeof t[e[0]]&&(t[e[0]]={}):t[e[0]]={},n.setValue(t[e[0]],e.slice(1),i,s)):s&&"object"==typeof t[e[0]]&&null!==t[e[0]]&&"object"==typeof i&&null!==i?t[e[0]]=Object.assign({},t[e[0]],i):t[e[0]]=i,t}static extractSnippetText(t,e){try{const i=(t=(new DOMParser).parseFromString(t,"text/html")).querySelector('[data-snippet="'+e+'"]');if(i)return i.textContent}catch{return""}return""}static wrapAll(t,e){return[...t.childNodes].forEach((t=>e.appendChild(t))),t.appendChild(e),e}static spawnFromString(t,e,i=!0){const n=document.createElement("template");return n.innerHTML=t.trim().formatUnicorn(e),i?n.content.firstElementChild:n.content}static spawnFromTemplate(t,e,i=!0){if(t)return n.spawnFromString(t.text,e,i)}static childMatches(t,e){return[].some.call(t.children,(t=>t.matches(e)))}static setInputValue(t,e){t&&t.value!==e&&(t.value=e,t.disabled=!1,t.dataset.dirty=!0)}static getInputValue(t,e){return t?t.value:e}static removeInputConstraints(t){t.querySelectorAll("input").forEach((t=>{t.removeAttribute("min"),t.removeAttribute("max")}))}static getDataValue(t,e,i){return t&&t.dataset[e]||i}static setElementContent(t,e){t&&(t.innerHTML=e)}static setElementText(t,e){t&&(t.textContent=e)}static getElementText(t,e){return t?t.textContent:e}static getRenderedText(t,e=""){if(!t)return e;let i="";return function t(e){switch(e.nodeType){case Node.TEXT_NODE:i+=e.nodeValue.trim();break;case Node.ELEMENT_NODE:if("BUTTON"===e.tagName||"INPUT"===e.tagName&&"hidden"===e.type)i+="";else if(e.classList.contains("widget-dropdown-pane"))i+="";else if("SELECT"===e.tagName){const t=e.options[e.selectedIndex];t&&(i+=t.text.trim())}else if("INPUT"===e.tagName)i+=e.value;else for(const i of e.childNodes)t(i)}}(t),i||e}static extractElements(t,e,i){let n=[];return t.querySelectorAll(e).forEach((t=>{n.push(...Array.from(t.querySelectorAll(i))),t.remove()})),n}static toggleClass(t,e,i){i.forEach((e=>e.classList.remove(t))),e&&e.classList.add(t)}static removeClassByPrefix(t,e){let i=[];t.classList.forEach((t=>{0!==t.indexOf(e)&&i.push(t)})),t.className=i.join(" ")}static getClassValue(t,e){if(t)for(let i of t.classList)if(0===i.indexOf(e))return i.substring(e.length)}static encodeHtmlAttribute(t){return"string"!=typeof t?t:t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static decodeHtmlAttribute(t){return"string"!=typeof t?t:t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}static numberToLetters(t,e=!0,i=65,s=26){i="string"==typeof i?i.charCodeAt(0):i;let r=t<=0?"":n.numberToLetters(Math.floor((t-1)/s),e,i,s)+String.fromCharCode((t-1)%s+i);return e?r.toLowerCase():r.toUpperCase()}static numberToRoman(t,e=!0){const i={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};let n="";for(;t>0;)for(const e in i)if(t>=i[e]){t-=i[e],n+=e;break}return e?n.toLowerCase():n}static abbrNum(t){return t.toUpperCase().split("").reduce(((t,e)=>26*t+e.charCodeAt(0)-96),0)}static numberToString(t,e){switch(e){case"alphabetic":case"alphabetic-lower":return n.numberToLetters(t,!0);case"alphabetic-upper":return n.numberToLetters(t,!1);case"roman":case"roman-lower":return n.numberToRoman(t,!0);case"roman-upper":return n.numberToRoman(t,!1);case"greek":case"greek-lower":return n.numberToLetters(t,!0,"Α",24);case"greek-upper":return n.numberToLetters(t,!1,"Α",24);default:return String(t)}}static mod(t,e){return(t%e+e)%e}static isTrue(t){return"string"==typeof t&&(t=t.toLowerCase()),1===t||"1"===t||!0===t||"true"===t}static isString(t){return"[object String]"===Object.prototype.toString.call(t)}static isElementVisible(t){return"none"!==window.getComputedStyle(t).getPropertyValue("display")}static isVisible(t,e){const{bottom:i,height:n,top:s}=t.getBoundingClientRect(),r=e.getBoundingClientRect();return s<=r.top?r.top-s<=n:i-r.bottom<=n}static nearestPositionedAncestor(t){let e=t.parentElement;for(;e;){const t=window.getComputedStyle(e).position;if("relative"===t||"absolute"===t||"fixed"===t||"sticky"===t)return e;e=e.parentElement}return null}static getPrevSibling(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return i;i=i.previousElementSibling}}static getNextSibling(t,e){if(!t)return;let i=t.nextElementSibling;for(;i;){if(i.matches(e))return i;i=i.nextElementSibling}}static getNextVisibleSibling(t,e){if(!t)return;let i=t.nextElementSibling;for(;i&&(!n.isElementVisible(i)||e&&!i.matches(e));)i=i.nextElementSibling;return i&&n.isElementVisible(i)&&(!e||i.matches(e))?i:void 0}static getPrevVisibleSibling(t,e){if(!t)return;let i=t.previousElementSibling;for(;i&&(!n.isElementVisible(i)||e&&!i.matches(e));)i=i.previousElementSibling;return i&&n.isElementVisible(i)&&(!e||i.matches(e))?i:void 0}static bottomAboveViewport(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.bottom<n.bottom}static topBelowViewport(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return i.top>n.top}static querySelectorLast(t,e){return[...t.querySelectorAll(e)].at(-1)}static querySelectorAndSelf(t,e){if(!Array.isArray(t))return t.matches&&t.matches(e)?t:t.querySelector(e);for(let i=0;i<t.length;i++){const s=n.querySelectorAndSelf(t[i],e);if(s)return s}}static querySelectorSelfAndContainer(t,e){return[t,t===document?null:t.closest(e)].filter((t=>null!==t&&t!==document&&t.matches(e)))}static querySelectorAllAndSelf(t,e){return[t,...t.querySelectorAll(e)].filter((t=>!(t instanceof DocumentFragment)&&t!==document&&t.matches(e)))}static querySelectorAllAndSelfAndContainer(t,e){const i=t?t.querySelectorAll(e):[],n=t&&t!==document?t.closest(e):null;return[t,...i,n].filter((t=>null!==t&&t!==document&&t.matches(e)))}static querySelectorText(t,e,i=""){return(t=t.querySelector(e))?t.textContent:i}static querySelectorData(t,e,i,n=""){return(t=t.querySelector(e))?t.dataset[i]:n}static listenEvent(t,e,i,n){if(!t)return;const s=t=>{if(void 0===n||t.target.matches(n))return i(t)};return t.eventListeners||(t.eventListeners={}),t.eventListeners[e]||(t.eventListeners[e]={}),t.eventListeners[e][n]||(t.eventListeners[e][n]=[]),t.eventListeners[e][n].push({source:i,target:s}),t.addEventListener(e,s)}static unlistenEvent(t,e,i,n){if(t&&t.eventListeners&&t.eventListeners[e]&&t.eventListeners[e][n]){const s=t.eventListeners[e][n];let r=s.length;for(;r--;){const n=s[r];n.source===i&&(t.removeEventListener(e,n.target),s.splice(r,1))}}}static emitEvent(t,e,i,n,s=!1){if(!t)return;let r=new CustomEvent(e,{bubbles:!0,cancelable:s,detail:{data:i,sender:n}});return t.dispatchEvent(r)}static getSelectionPosition(t){if(window.getSelection){const t=window.getSelection();if(t.rangeCount>0){return t.getRangeAt(0).startOffset}}return 0}static setSelectionPosition(t,e){const i=document.createRange(),n=window.getSelection();i.setStart(t.childNodes[0],e),i.collapse(!0),n.removeAllRanges(),n.addRange(i)}static lon2tile(t,e){return Math.floor((t+180)/360*Math.pow(2,e))}static lat2tile(t,e){return Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,e))}static tile2long(t,e){return t/Math.pow(2,e)*360-180}static tile2lat(t,e){const i=Math.PI-2*Math.PI*t/Math.pow(2,e);return 180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)))}static collapseWhitespace(t){return t.replace(/ +/g," ")}static prefixNumbersWithZero(t,e=1){return t.replace(/\d+/g,(t=>t.padStart(e,"0")))}static replaceSpacesWithHyphens(t){return t.replace(/\s+/g,"-")}static removeSpecialCharacters(t){return t.replace(/[^ ~a-z0-9\-_]/g,"")}static replaceUmlauts(t){return t.replace(/ä/g,"ae").replace(/ö/g,"oe").replace(/ü/g,"ue").replace(/Ä/g,"Ae").replace(/Ö/g,"Oe").replace(/Ü/g,"Ue").replace(/ß/g,"sz")}static extractNumber(t){return(t=t.match(/\d+/))?t[0]:""}static extractFileName(t){if(!t)return;return t.split(/[/\\]/).pop()}static parseFormData(t){const e={};for(const[i,s]of t.entries())n.setValue(e,i,s);return e}static formToUrl(t,e){let i=new URL(t.getAttribute("action"),e);const n=new URLSearchParams(new FormData(t));let s=i.searchParams;return s=new URLSearchParams({...Object.fromEntries(s),...Object.fromEntries(n)}),s=s.toString(),i.search=s,i.toString()}static toObject(t,e="data"){if("object"==typeof t)return t;if("string"==typeof t){const i={};return i[e]=t,i}throw new Error("Input must be an object or a string")}static splitString(t,e=","){return t?""===t?[]:t.split(e):[]}static getPrefix(t,e=":",i=""){const n=t.indexOf(e);return-1!==n?t.substring(0,n):i}}const s=n;String.prototype.capitalize||(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),$.fn.reverse=[].reverse,String.prototype.formatUnicorn||(String.prototype.formatUnicorn=function(){let t=this.toString();if(arguments.length){let e,i=typeof arguments[0],s="string"===i||"number"===i?Array.prototype.slice.call(arguments):arguments[0];for(e in s){let i=new RegExp("\\{"+e+"\\}","gi");t=t.replace(i,s[e]);let r=new RegExp("\\{"+e+"\\|attr\\}","gi");t=t.replace(r,n.encodeHtmlAttribute(s[e]))}}return t})},968:(t,e,i)=>{i.a(t,(async(t,e)=>{try{i(182);var n=i(649),s=(i(584),i(482)),r=t([n,s]);[n,s]=r.then?(await r)():r;e()}catch(t){e(t)}}))},482:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var n=i(182),s=i(649),r=i(584),o=t([s]);s=(o.then?(await o)():o)[0];class a extends r.I{constructor(t,e,i){super(t,e,i),this.titlePane=void 0,this.contentPane=void 0,this.buttonPane=void 0,this.footerPane=void 0,this.actionButtons=void 0,this.options={},this.formOptions={},this.currentUrl=void 0,this.isSaving=!1}initWidget(){this.listenEvent(this.widgetElement,"app:show:message",(t=>this.showMessage(t))),this.listenEvent(this.widgetElement,"app:hide:message",(t=>this.hideMessage(t)))}showData(t){return this.options={...this.defaults,...t},this.openWindow(t.frameTarget||"details",t.force),void 0!==t.url?t.delay?setTimeout((()=>this.loadUrl(t.url,t)),t.delay):this.loadUrl(t.url,t):void 0!==t.element&&this.loadElement(t.element,t),this}toggleLoader(t=!0){if(this.widgetElement)if(t){let t=this.widgetElement.querySelector(".frame-loader, .loader");t||(t=n.Z.spawnFromString('<div class="loader frame-loader"></div>'),this.contentPane?this.contentPane.appendChild(t):this.widgetElement.appendChild(t))}else{const t=this.widgetElement.querySelector(".frame-loader, .loader");t&&t.remove()}}clearData(t){this.unlock(),this.showLoader(t)}clearWindow(){this.clearData(),this.updateTitle(),this.updateTitleButtons(),this.updateToolbar(),this.updateActionButtons()}openWindow(){}closeWindow(t=!1){return!1}showLoader(){this.toggleLoader(!0)}hideLoader(){this.toggleLoader(!1)}showMessage(t,e){let i;t instanceof CustomEvent&&(i=t,e=i.detail.data.status||e,t=i.detail.data.msg);let s=this.widgetElement.querySelector(".content-flash");if(s||i||(s=document.querySelector(".content-flash")),s){let i=n.Z.spawnFromString(`<div class="message ${e}">${t}</div>`);s.replaceChildren(i)}s&&i&&i.stopPropagation()}hideMessage(t){}attachButtons(t,e){const i=this;if(void 0===t)return[];const n=(e=e||{}).ajaxButtons;return n instanceof Array&&(t=t.filter((t=>n.includes(t.dataset.role)))),t.map((function(t){const n=t.dataset.role;let s="role-"+n;const r=t.dataset.shortcuts;return r&&(s+=" widget-shortcut"),{text:t.textContent,title:t.getAttribute("title",t.textContent),ariaLabel:t.getAttribute("aria-label",t.textContent),class:s,role:n,shortcuts:r,ariaKeyshortcuts:t.dataset.shortcuts,click:function(s){if(i.emitEvent("epi:click:button",{button:t,role:n},!0)){if("import"!==n){if("submit"===n||"save"===n||"cancel"===n||"delete"===n){let r;return r=t.hasAttribute("form")?document.getElementById(t.getAttribute("form")):t.form,void(r?(t.setAttribute("disabled","disabled"),e.focus=!1,e.keepopen="save"===n,i.formOptions=e,"submit"===n||"save"===n?i.submitForm(s):"delete"===n?i.unlockForm(r.dataset.deleteUrl,!0):"cancel"===n&&i.unlockForm(r.dataset.cancelUrl,!0)):"cancel"===n&&i.closeWindow(!0))}if("A"===t.tagName){let e=s.target.dataset.href||t.getAttribute("href"),n={};t.dataset.target&&(n.target=t.dataset.target),i.loadUrl(e,n)}}}else s.preventDefault()}}}))}addButtons(t,e,i=!1){t.forEach((t=>{const n=document.createElement("button");n.textContent=t.text||"",n.classList.add(...(t.class||"").split(" ")),n.onclick=t.click,n.dataset.role=t.role,n.setAttribute("title",t.title||""),n.setAttribute("aria-label",t.ariaLabel||""),t.shortcuts&&(n.setAttribute("aria-keyshortcuts",t.ariaKeyshortcuts||""),n.dataset.shortcuts=t.shortcuts,n.classList.add("widget-shortcut")),i?e.prepend(n):e.appendChild(n)})),App.initWidgets(e)}showButton(t,e,i){if(this.buttonPane){const s=this.buttonPane.querySelector('[data-role="'+t+'"],.role-'+t);n.Z.show(s,e),i&&("A"===s.tagName?s.setAttribute("href",i):s.dataset.href=i)}}hideButton(t){if(this.buttonPane){const e=this.buttonPane.querySelector('[data-role="'+t+'"], .role-'+t);n.Z.hide(e)}}clickButton(t){if(!this.buttonPane)return!1;const e=this.buttonPane.querySelector('[data-role="'+t+'"], .role-'+t);return!!e&&(e.click(),!0)}setButtonUrl(t,e){if(this.buttonPane){const i=this.buttonPane.querySelector('[data-role="'+t+'"], .role-'+t);i&&("A"===i.tagName?i.setAttribute("href",e):i.dataset.href=e)}}updateTitle(t){}updateTitleButtons(t){}updateToolbar(t){}updateActionButtons(t,e){let i=[];if(this.options.ajaxButtons&&(i=this.attachButtons(t,e)),this.options.dialogButtons&&("exclusive"!==this.options.ajaxButtons||!i.length))for(const[t,e]of Object.entries(this.options.dialogButtons))i.push({text:e.text,title:e.title,ariaLabel:e.ariaLabel,class:"role-"+t,click:t=>e.handler(this)});this.actionButtons=i;const n=this.contentPane.querySelector("form");this.attachForm(n)}updateSelection(){const t=this.widgetElement.querySelector(".row-selected");t?n.Z.scrollIntoViewIfNeeded(t,t.parentElement,!0,"y"):$(this.widgetElement).scrollTop(0)}updateNavigation(t,e){n.Z.isString(t)&&(t=n.Z.spawnFromString(t,void 0,!1));let i=t.querySelector("nav.breadcrumbs");i?(this.updateTitle(i.textContent),i.remove()):e.title&&this.updateTitle(e.title);const s=n.Z.extractElements(t,'[data-snippet="actions-top"]',"a, button");this.updateTitleButtons(s);const r=t.querySelector("div.content-toolbar");this.updateToolbar(r);const o=n.Z.extractElements(t,'[data-snippet="actions-bottom"], [data-snippet="actions-content"]',"a, button");this.updateActionButtons(o,e);const a=t.querySelector("footer");a&&""===a.innerHTML.trim()&&a.remove()}updatePage(t,e){if(e=e||{focus:!0,openDropdown:!1,title:""},this.clearData(),t instanceof Element?this.contentPane.replaceChildren(t):this.contentPane.innerHTML=t,this.updateSelection(),this.updateNavigation(this.widgetElement,e),"function"==typeof App.initWidgets&&App.initWidgets(this.widgetElement),this.footerPane){this.footerPane.innerHTML="";Array.from(this.widgetElement.querySelectorAll("[data-position=fixed]")).forEach(((t,e)=>{let i=t.closest("form");i&&Array.from(t.querySelectorAll("input")).forEach((t=>{t.setAttribute("form",i.getAttribute("id"))})),this.footerPane.appendChild(t)}))}if(e.onLoad&&e.onLoad(this,t,e),e.focus){let t=this.widgetElement.querySelector("[autofocus]");t=t||this.widgetElement.querySelector("select, input[type=text], .widget-xmleditor"),t&&(t.removeAttribute("autofocus"),t.focus(),"function"==typeof t.select&&t.select())}}loadElement(t,e={}){e.element=t,e.clone&&(e.element=e.element.cloneNode(!0)),this.updatePage(e.element,e)}loadUrl(t,e={}){if("external"===e.target)return void window.open(t);if("main"===e.target)return App.ajaxQueue.stop(),void(window.location=t);this.currentUrl=t,this.showLoader();let i=null,n="GET",s=!1;e.lock&&(i=$.param({lock:e.lock}),n="POST",s="application/x-www-form-urlencoded");const r=this;$.ajax({type:n,url:t,data:i,dataType:"html",async:!0,retryLimit:3,tryCount:0,contentType:s,processData:!1,success:function(t){r.updatePage(t,e)},error:function(t,i,n){const s="Error loading data:"+t.responseText;if(r.emitEvent("app:show:message",{msg:s,status:"error"}),r.updatePage(s,e),403===t.status){let t=this;t.tryCount++,App.user.showLogin({onLogin:function(){t.tryCount<=t.retryLimit&&$.ajax(t)}})}},complete:function(t,e){r.isSaving=!1,r.hideLoader()}})}}class l extends a{constructor(t,e,i){super(t,e,i),this.attachElement(t,"content-pane"),this.widgetElement.classList.add("widget-content-pane");const s=n.Z.spawnFromString('<div class="frame-title"><div class="frame-title-caption"></div><div class="frame-title-manage"><button class="btn-close" title="Close" aria-label="Close"></button></div></div>');this.widgetElement.appendChild(s),this.titlePane=s.querySelector(".frame-title-caption"),this.titleButtons=s.querySelector(".frame-title-manage"),this.toolbarPane=n.Z.spawnFromString('<div class="frame-toolbar"></div>'),this.widgetElement.appendChild(this.toolbarPane),this.contentPane=n.Z.spawnFromString('<div class="frame-content"></div>'),this.widgetElement.appendChild(this.contentPane),this.footerPane=n.Z.spawnFromString('<div class="frame-footer"></div>'),this.widgetElement.appendChild(this.footerPane),this.buttonPane=n.Z.spawnFromString('<div class="frame-buttons actions-bottom"></div>'),this.widgetElement.appendChild(this.buttonPane),this.isClosing=!1,this.defaults={title:"",width:800,ajaxButtons:!0,external:!1,dialogButtons:{},focus:!0},this.options={},this.currentUrl=void 0,this.closeButton=void 0,this.openExtButton=void 0}openWindow(t="default",e=!0){this.clearWindow(),this.isClosing=!1,App.sidebarright.showSidebar(e);const i=this.getWidget(this.widgetElement,"tabsheets");i&&i.showTab(t,"last"),this.listenerReload||(this.listenerReload=t=>this.showData(this.options),this.listenEvent(this.widgetElement,"epi:reload:page",this.listenerReload))}closeWindow(t){return!!this.isClosing||(this.options.onClose&&this.options.onClose(this),!t&&(this.isClosing=!0,this.clearData(),App.sidebarright.hideSidebar(),void(this.listenerReload&&this.unlistenEvent(this.widgetElement,"epi:reload:page",this.listenerReload))))}updateTitle(t){this.titlePane.innerHTML=t||""}updateTitleButtons(t){if(this.options.external&&(void 0===this.openExtButton&&(this.openExtButton=n.Z.spawnFromString('<button class="btn-open" title="'+s.a.t("Open in new tab")+'" aria-label="'+s.a.t("Open in new tab")+'"></button>'),this.titleButtons.appendChild(this.openExtButton)),this.openExtButton.dataset.targetUrl=!0!==this.options.external?this.options.external:this.currentUrl,n.Z.toggle(this.openExtButton,!1!==this.options.external)),void 0===this.closeButton&&(this.closeButton=n.Z.spawnFromString('<button class="btn-close" title="'+s.a.t("Close")+'" aria-label="'+s.a.t("Close")+'"></button>'),this.titleButtons.appendChild(this.closeButton)),this.options.ajaxButtons&&this.titlePane){const e=this.attachButtons(t);this.addButtons(e,this.titlePane,!0)}super.updateTitleButtons(t)}updateToolbar(t){t?this.toolbarPane.replaceChildren(t):this.toolbarPane.innerHTML=""}updateActionButtons(t,e){super.updateActionButtons(t,e),this.buttonPane.innerHTML="",this.addButtons(this.actionButtons,this.buttonPane),this.listenButtons()}clearData(t,e=!1){this.openExtButton&&(this.openExtButton.remove(),this.openExtButton=void 0),this.closeButton&&(this.closeButton.remove(),this.closeButton=void 0),this.widgetElement&&(this.emitEvent("epi:clear:widgets"),e?(this.titlePane.remove(),this.titleButtons.remove(),this.toolbarPane.remove(),this.footerPane.remove(),this.buttonPane.remove(),this.contentPane.remove()):(this.titlePane.innerHTML="",this.titleButtons.innerHTML="",this.toolbarPane.innerHTML="",this.footerPane.innerHTML="",this.buttonPane.innerHTML="",this.contentPane.innerHTML="")),super.clearData(t)}onSaveProceed(t,e){if(!super.onSaveProceed(t,e))return;let i=new URL(e.responseURL).searchParams.get("open");if(i)window.setTimeout((function(){window.open(i)}),1e3),this.updatePage(t,this.formOptions);else if(this.formElement&&this.formElement.dataset.proceedUrl){i=new URL(n.Z.decodeHtmlAttribute(this.formElement.dataset.proceedUrl),App.baseUrl);const t=s.a.t("Reloading document");this.loadUrl(i,{message:t})}else this.updatePage(t,this.formOptions)}}window.App.widgetClasses=window.App.widgetClasses||{},window.App.widgetClasses.frame=l,e()}catch(t){e(t)}}))}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return s[t](i,i.exports,o),i.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},o.a=(s,r,o)=>{var a;o&&((a=[]).d=-1);var l,c,u,d=new Set,h=s.exports,m=new Promise(((t,e)=>{u=e,c=t}));m[e]=h,m[t]=t=>(a&&t(a),d.forEach(t),m.catch((t=>{}))),s.exports=m,r((s=>{var r;l=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[t])return s;if(s.then){var r=[];r.d=0,s.then((t=>{o[e]=t,n(r)}),(t=>{o[i]=t,n(r)}));var o={};return o[t]=t=>t(r),o}}var a={};return a[t]=t=>{},a[e]=s,a})))(s);var o=()=>l.map((t=>{if(t[i])throw t[i];return t[e]})),c=new Promise((e=>{(r=()=>e(o)).r=0;var i=t=>t!==a&&!d.has(t)&&(d.add(t),t&&!t.d&&(r.r++,t.push(r)));l.map((e=>e[t](i)))}));return r.r?c:o()}),(t=>(t?u(m[i]=t):c(h),n(a)))),a&&a.d<0&&(a.d=0)},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);o(968)})();